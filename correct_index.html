<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>IELTS Reading Highlighter</title>

<style>
body{font-family:Arial, sans-serif;margin:40px;background:#fafafa}
#passage{background:white;padding:30px;border-radius:10px;line-height:1.7;border:1px solid #ddd}
.highlight{background:yellow}
.noteBox{
 position:absolute;
 background:white;
 border:1px solid #ccc;
 padding:10px;
 border-radius:8px;
 width:200px;
 box-shadow:0 5px 12px rgba(0,0,0,.15);
}
textarea{width:100%;height:60px}
button{margin-top:6px;padding:5px 8px;border-radius:6px;border:1px solid #aaa;background:#f0f0f0;cursor:pointer}
</style>
</head>

<body>

<h2>IELTS Reading Practice</h2>
<p>Select any text to highlight and add your notes.</p>

<div id="passage">
Climate change is one of the most pressing global issues today. Scientists warn that rising temperatures could lead to more frequent extreme weather events. Governments around the world are attempting to reduce carbon emissions, yet progress remains slow. Many experts believe that public awareness and individual responsibility are key factors in addressing environmental challenges.
</div>

<script>
let selectedRange;

document.addEventListener("mouseup", () => {
  const sel = window.getSelection();
  if(sel.toString().length > 0){
    selectedRange = sel.getRangeAt(0);
    showNoteBox(sel);
  }
});

function showNoteBox(sel){
  const rect = selectedRange.getBoundingClientRect();
  const box = document.createElement("div");
  box.className = "noteBox";
  box.style.left = (rect.right + window.scrollX + 10) + "px";
  box.style.top = (rect.top + window.scrollY) + "px";

  box.innerHTML = `
    <textarea placeholder="Write your note..."></textarea>
    <button onclick="saveHighlight(this)">Save</button>
  `;
  document.body.appendChild(box);
}

function saveHighlight(btn){
  const note = btn.previousElementSibling.value;
  const span = document.createElement("span");
  span.className = "highlight";
  selectedRange.surroundContents(span);

  const data = JSON.parse(localStorage.getItem("ielts_notes")||"[]");
  data.push({text: span.innerText, note});
  localStorage.setItem("ielts_notes", JSON.stringify(data));

  btn.parentElement.remove();
  window.getSelection().removeAllRanges();
}
</script>

</body>
</html>
